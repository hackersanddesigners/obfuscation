(function(e){function t(t){for(var n,o,a=t[0],c=t[1],u=t[2],d=0,h=[];d<a.length;d++)o=a[d],Object.prototype.hasOwnProperty.call(i,o)&&i[o]&&h.push(i[o][0]),i[o]=0;for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&(e[n]=c[n]);l&&l(t);while(h.length)h.shift()();return r.push.apply(r,u||[]),s()}function s(){for(var e,t=0;t<r.length;t++){for(var s=r[t],n=!0,a=1;a<s.length;a++){var c=s[a];0!==i[c]&&(n=!1)}n&&(r.splice(t--,1),e=o(o.s=s[0]))}return e}var n={},i={app:0},r=[];function o(t){if(n[t])return n[t].exports;var s=n[t]={i:t,l:!1,exports:{}};return e[t].call(s.exports,s,s.exports,o),s.l=!0,s.exports}o.m=e,o.c=n,o.d=function(e,t,s){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:s})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(o.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)o.d(s,n,function(t){return e[t]}.bind(null,n));return s},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/";var a=window["webpackJsonp"]=window["webpackJsonp"]||[],c=a.push.bind(a);a.push=t,a=a.slice();for(var u=0;u<a.length;u++)t(a[u]);var l=c;r.push([0,"chunk-vendors"]),s()})({0:function(e,t,s){e.exports=s("56d7")},"0238":function(e,t,s){"use strict";s("c42b")},"034f":function(e,t,s){"use strict";s("85ec")},"1e65":function(e,t,s){},2840:function(e,t,s){"use strict";s("1e65")},"315d":function(e,t,s){"use strict";s("f38d")},"37cb":function(e,t,s){},"56d7":function(e,t,s){"use strict";s.r(t);s("e260"),s("e6cf"),s("cca6"),s("a79d");var n,i,r=s("2b0e"),o=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{attrs:{id:"app"}},[s("Home",{class:{mobile:e.isMobile},attrs:{slug:e.slug}})],1)},a=[],c=(s("ac1f"),s("5319"),new r["a"]({data:{isMobile:!1}})),u=s("7707"),l=s.n(u),d=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{class:{hidden:!e.loaded},attrs:{id:"home"}},[s("Userland",{attrs:{wantsToView:e.wantsToView}})],1)},h=[],f=(s("fb6a"),s("2ca0"),function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("header",{class:{blur:!e.registered||e.editing}},[s("h1",[e._v("platframe")]),s("Minimap",{attrs:{windowWidth:e.windowWidth,windowHeight:e.windowHeight,windowLeft:e.windowLeft,windowTop:e.windowTop,scale:e.scale,me:e.me,users:e.users,messages:e.messages},on:{newPosition:function(t){return e.scrollTo(t)}}}),s("Options",{attrs:{registered:e.registered,editing:e.editing,name:e.me.name,color:e.me.color,grid:e.grid,usernames:e.getUserNames()},on:{grid:function(t){e.grid=!e.grid},editMe:function(t){e.editing=!0},newColor:e.updateColor,newMe:e.updateAppearance,register:e.saveMe,deleteMe:function(t){return e.deleteMe()},deleteEverything:function(t){return e.deleteEverything()}}}),s("Userlist",{attrs:{me:e.me,users:e.users},on:{goTo:function(t){e.scrollTo(e.getUserPosition(t),"smooth")}}})],1),s("div",{ref:"userlandContainer",class:{blur:!e.registered||e.editing},attrs:{id:"userlandContainer"}},[s("div",{ref:"userland",style:{height:100*e.scale+"%",width:100*e.scale+"%"},attrs:{id:"userland"}},[s("Grid",{attrs:{scale:e.scale,hidden:!e.grid}}),s("User",{key:e.me.uid,ref:"me",attrs:{user:e.me,isMe:!0,messages:e.getUserMessages(e.me)},on:{newPosition:e.updatePosition}}),e._l(e.users,(function(t){return s("User",{key:t.uid,ref:"Users",refInFor:!0,attrs:{user:t,messages:e.getUserMessages(t)}})}))],2)])])}),m=[],p=(s("99af"),s("7db0"),s("4160"),s("c975"),s("d81d"),s("b0c0"),s("b64b"),s("07ac"),s("159b"),s("8a77")),g=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("table",{class:{hidden:e.hidden},attrs:{id:"grid"}},[s("tbody",e._l(e.scale*e.definition,(function(t){return s("Row",{key:t,attrs:{x:e.scale*e.definition}})})),1)])},v=[],w=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("tr",e._l(e.x,(function(e){return s("Cell",{key:e})})),1)},b=[],y=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("td")},M=[],$={name:"Cell"},_=$,O=(s("fe21"),s("2877")),x=Object(O["a"])(_,y,M,!1,null,"7cdee33c",null),C=x.exports,S={name:"Row",components:{Cell:C},props:["x"]},k=S,N=Object(O["a"])(k,w,b,!1,null,"b5b15c9a",null),T=N.exports,j={name:"Grid",components:{Row:T},props:["scale","hidden"],data:function(){return{definition:10}}},P=j,U=(s("bc72"),Object(O["a"])(P,g,v,!1,null,"4ab5e2fb",null)),E=U.exports,J=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{style:{height:e.height+"vh",width:e.width+"vw"},attrs:{id:"minimap"}},[s("Cursorr",{attrs:{user:e.me,scale:e.scale}}),e._l(e.users,(function(t){return s("Cursorr",{key:t.uid,attrs:{user:t,scale:e.scale}})})),e._l(e.messages,(function(e){return s("MiniMessage",{key:e.uid,attrs:{message:e}})})),s("Viewport",{directives:[{name:"dragged",rawName:"v-dragged",value:e.dragViewport,expression:"dragViewport"}],ref:"viewport",attrs:{id:"viewport",width:e.windowWidth/e.zoomIndex,height:e.windowHeight/e.zoomIndex,left:e.windowLeft/e.zoomIndex,top:e.windowTop/e.zoomIndex}})],2)},L=[],H=function(){var e=this,t=e.$createElement,s=e._self._c||t;return e.user.uid?s("div",{class:["cursorContainer",{uid:e.user.uid,typing:!e.scale&&(e.user.typing||e.hovered)}],style:{left:100*e.user.x-.2+"%",top:100*e.user.y-.2*.75+"%","--scale":e.scale?e.scale:1,"--userColor":e.user.connected?e.user.color:"lightgrey"}},[!e.scale&&e.isMe?s("input",{ref:"input",staticClass:"input",attrs:{type:"text",placeholder:"type message & press enter",autofocus:""}}):e.scale?e._e():s("span",{staticClass:"input"},[e._v(" "+e._s(e.user.typing)+" ")]),s("div",{staticClass:"cursor"},[e.scale||!e.user.typing&&!e.hovered?e.scale?e._e():s("span",{staticClass:"name"}):s("span",{staticClass:"name"},[e._v(" "+e._s(e.isMe?"me":e.user.connected?e.user.name:e.user.name+" (offline)")+" ")])])]):e._e()},z=[],W={name:"Cursorr",components:{},props:["user","isMe","scale","hovered"],data:function(){return{}},mounted:function(){this.isMe&&!this.scale&&this.trackCursor()},methods:{trackCursor:function(){var e=this;document.addEventListener("mousemove",(function(t){e.$emit("newPosition",{x:t.clientX,y:t.clientY}),t.preventDefault()}))}}},V=W,R=(s("2840"),Object(O["a"])(V,H,z,!1,null,"7121c9fc",null)),I=R.exports,A=function(){var e=this,t=e.$createElement,s=e._self._c||t;return e.message.uid&&!e.message.deleted?s("div",{class:["minimessage"],style:{left:e.toNearestX(e.message.x,.4)+"%",top:e.toNearestX(e.message.y,.4)+"%",background:e.message.color,"--blur":"blur("+(e.now-e.message.time)/1e8+"px)"}}):e._e()},X=[],D=s("f817"),F={name:"MiniMessage",components:{},props:["message"],data:function(){return{now:(new Date).getTime()}},mounted:function(){},methods:{fromNow:function(e){return Object(D["a"])(e).fromNow()},toNearestX:function(e,t){return Math.floor(100*e/t)*t}}},Y=F,B=(s("d5c0"),Object(O["a"])(Y,A,X,!1,null,null,null)),G=B.exports,Z=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{style:{width:e.width+e.unit,height:e.height+e.unit,left:e.left+e.unit,top:e.top+e.unit}})},q=[],K={name:"Viewport",components:{},props:["width","height","left","top"],data:function(){return{unit:"px"}},mounted:function(){},methods:{}},Q=K,ee=(s("5b46"),Object(O["a"])(Q,Z,q,!1,null,"91f886ee",null)),te=ee.exports,se={name:"Minimap",components:{Viewport:te,Cursorr:I,MiniMessage:G},props:["windowWidth","windowHeight","windowLeft","windowTop","scale","me","users","messages"],data:function(){return{height:20,width:20,zoomIndex:5*this.scale,mini:!0}},mounted:function(){},methods:{sendDesiredPosition:function(e){var t={x:e.layerX*this.zoomIndex,y:e.layerY*this.zoomIndex};this.$emit("newPosition",t)},dragViewport:function(e){var t=e.deltaX,s=e.deltaY,n=e.first,i=e.last;if(n)this.dragging=!0;else if(i)this.dragging=!1;else{var r={x:this.windowLeft+t*this.zoomIndex,y:this.windowTop+s*this.zoomIndex};this.$emit("newPosition",r)}}}},ne=se,ie=(s("315d"),Object(O["a"])(ne,J,L,!1,null,"21817b5f",null)),re=ie.exports,oe=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{attrs:{id:"options"}},[!e.registered||e.editing?s("Register",{attrs:{registered:e.registered,name:e.name,color:e.color,usernames:e.usernames},on:{newMe:function(t){return e.$emit("newMe",t)},newColor:function(t){return e.$emit("newColor",t)},register:function(t){return e.$emit("register",t)}}}):e._e(),s("span",{staticClass:"title"},[e._v(" options ")]),s("div",{staticClass:"grid"},[s("input",{attrs:{type:"button",name:"grid",value:e.grid?"hide grid":"show grid"},on:{click:function(t){return t.stopPropagation(),e.$emit("grid")}}})]),s("div",{staticClass:"edituser"},[s("input",{attrs:{type:"button",name:"edituser",value:"edit appearance"},on:{click:function(t){return t.stopPropagation(),e.$emit("editMe")}}})]),s("div",{staticClass:"storage"},[s("input",{attrs:{type:"button",name:"storage",value:"delete me"},on:{click:function(t){return t.stopPropagation(),e.$emit("deleteMe")}}})]),s("div",{staticClass:"db"},[s("input",{attrs:{type:"button",name:"db",value:"delete everything"},on:{click:function(t){return t.stopPropagation(),e.$emit("deleteEverything")}}})])],1)},ae=[],ce=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{class:{},attrs:{id:"registerContainer"}},[s("div",{attrs:{id:"register"}},[e.registered?e._e():s("div",{staticClass:"introText"},[s("h3",[e._v("Welcome.")]),s("p",[e._v("To join the conversation, please pick a display name and color. You can change these later.")])]),s("div",{staticClass:"form"},[s("input",{ref:"name",attrs:{type:"text",placeholder:"pick a display name"}}),e.invalid?s("p",{staticClass:"error"},[e._v("Your display name cannot contain any spaces or special characters. ")]):e.tooshort?s("p",{staticClass:"error"},[e._v("Your display name must contain at least 3 characters. ")]):e.inuse?s("p",{staticClass:"error"},[e._v("This name has already been taken by someone else. ")]):e._e(),s("input",{ref:"color",attrs:{type:"text","data-jscolor":""},on:{input:e.updateColor}}),s("input",{ref:"submit",attrs:{type:"button",value:"save"},on:{click:function(t){return t.stopPropagation(),e.save()}}})]),e.registered?e._e():s("div",{staticClass:"introText"},[s("p",[e._v("This site does not use cookies. The information you are entering is stored in your browser and sent to all the other users.")])])])])},ue=[],le=(s("4d63"),s("25f0"),s("881d")),de=s.n(le),he={name:"Register",props:["name","color","registered","usernames"],data:function(){return{colorPickerOpts:{format:"rgba",previewPosition:"right",previewSize:30,borderRadius:0,padding:0,controlBorderColor:"rgba(255,255,255,0)",sliderSize:13,shadow:!1},invalid:!1,tooshort:!1,inuse:!1}},mounted:function(){var e=this;de.a.presets.default=this.colorPickerOpts,this.$refs.color.value=this.color,de.a.init(),this.$refs.name.value=this.name,this.$refs.name.select(),this.$nextTick((function(){e.registered&&new de.a(e.$refs.color)}))},methods:{save:function(){var e=this.$refs.name.value,t=this.$refs.color.value;this.validateChars(e)?this.validateLength(e)?this.existingUser(e)?this.registered?this.updateAppearance(e,t):this.register(e,t):this.inuse=!0:this.tooshort=!0:this.invalid=!0},cancel:function(){this.$emit("newMe",{name:this.name,color:this.color})},updateAppearance:function(e,t){this.$emit("newMe",{name:e,color:t})},updateColor:function(){this.$emit("newColor",{color:this.$refs.color.value})},register:function(e,t){this.$emit("register",{name:e,color:t})},validateChars:function(e){return/^[A-Za-z0-9]+(?:-[A-Za-z0-9]+)*$/.test(e)},validateLength:function(e){return e.length>1},existingUser:function(e){return this.usernames.indexOf(e)},toSlug:function(e){e=e.replace(/^\s+|\s+$/g,""),e=e.toLowerCase();for(var t="àáäâèéëêìíïîòóöôùúüûñç·/_,:;",s="aaaaeeeeiiiioooouuuunc------",n=0,i=t.length;n<i;n++)e=e.replace(new RegExp(t.charAt(n),"g"),s.charAt(n));return e=e.replace(/[^a-z0-9 -]/g,"").replace(/\s+/g,"-").replace(/-+/g,"-"),e}}},fe=he,me=(s("c1f5"),Object(O["a"])(fe,ce,ue,!1,null,"7c99526a",null)),pe=me.exports,ge={name:"Options",components:{Register:pe},props:["registered","editing","name","color","grid","usernames"],data:function(){return{}},mounted:function(){},methods:{}},ve=ge,we=(s("a7cb"),Object(O["a"])(ve,oe,ae,!1,null,"d79a77fc",null)),be=we.exports,ye=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{attrs:{id:"userlist"}},[s("span",{staticClass:"title"},[e._v(" participants ")]),s("ul",[s("Userlabel",{attrs:{user:e.me,isMe:!0},nativeOn:{click:function(t){return t.stopPropagation(),e.$emit("goTo",e.me)}}}),e._l(e.connectedUsersFirst(),(function(t){return s("Userlabel",{key:t.uid,attrs:{user:t},nativeOn:{click:function(s){return s.stopPropagation(),e.$emit("goTo",t)}}})}))],2)])},Me=[],$e=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("li",{class:["userLabel",e.user.uid,{me:e.isMe}],style:{"--userColor":e.user.connected?e.user.color:"lightgrey"},on:{mouseover:function(t){e.hovered=!0},mouseleave:function(t){e.hovered=!1}}},[s("span",[e._v(" ● ")]),s("span",[e._v(" "+e._s(e.isMe?"me":e.user.name)+" ")]),s("span",[e._v(" "+e._s(e.hovered?"→":""))])])},_e=[],Oe={name:"UserLabel",components:{},props:["isMe","user"],data:function(){return{hovered:!1}},mounted:function(){},methods:{}},xe=Oe,Ce=(s("8855"),Object(O["a"])(xe,$e,_e,!1,null,"36c43072",null)),Se=Ce.exports,ke={name:"Userlist",components:{Userlabel:Se},props:["me","users"],data:function(){return{}},mounted:function(){},methods:{connectedUsersFirst:function(){var e=Object.values(this.users);e.sort((function(e,t){return e.connected===t.connected?0:e.connected?-1:1}));for(var t={},s=0;s<e.length;s++){var n=e[s];t[n.uid]=n}return t}}},Ne=ke,Te=(s("0238"),Object(O["a"])(Ne,ye,Me,!1,null,"43174f26",null)),je=Te.exports,Pe=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{class:["user",e.user.uid,{me:e.isMe,disconnected:!e.user.connected}],style:{"--userColor":e.user.connected?e.user.color:"lightgrey"}},[s("Cursorr",{ref:"Cursor",attrs:{user:e.user,isMe:e.isMe,hovered:e.hovered},on:{newPosition:function(t){return e.$emit("newPosition",t)}},nativeOn:{mouseover:function(t){!e.isMe&&(e.hovered=!0)},mouseleave:function(t){e.hovered=!1}}}),e._l(e.messages,(function(t){return s("Message",{key:t.uid,ref:"Messages",refInFor:!0,attrs:{message:t,isMe:e.isMe,hovered:e.hovered},nativeOn:{mouseover:function(t){e.hovered=!0},mouseleave:function(t){e.hovered=!1}}})}))],2)},Ue=[],Ee=function(){var e=this,t=e.$createElement,s=e._self._c||t;return e.message.uid&&!e.message.deleted?s("div",{class:["messageContainer",{hover:e.hovered}],style:{left:e.toNearestX(e.message.x,.4)+"%",top:e.toNearestX(e.message.y,.4)+"%","--blur":"blur("+(e.now-e.message.time)/1e8+"px)"},attrs:{id:e.message.uid}},[s("vue-markdown",{staticClass:"message"},[e._v(" "+e._s(e.message.content)+" ")]),s("span",{staticClass:"time"},[e._v(" "+e._s(e.fromNow(e.message.time))+" ")])],1):e._e()},Je=[],Le={name:"Message",components:{},props:["isMe","message","hovered"],data:function(){return{now:(new Date).getTime()}},mounted:function(){},methods:{fromNow:function(e){return Object(D["a"])(e).fromNow()},toNearestX:function(e,t){return Math.floor(100*e/t)*t}}},He=Le,ze=(s("f87e"),Object(O["a"])(He,Ee,Je,!1,null,null,null)),We=ze.exports,Ve={name:"User",components:{Cursorr:I,Message:We},props:["user","messages","isMe"],data:function(){return{hovered:!1}},mounted:function(){},methods:{}},Re=Ve,Ie=(s("eaa7"),Object(O["a"])(Re,Pe,Ue,!1,null,"013fd43e",null)),Ae=Ie.exports,Xe=[],De=[],Fe={name:"Userland",components:{Grid:E,Minimap:re,Options:be,Userlist:je,User:Ae},props:["wantsToView"],data:function(){return{me:{uid:Object(p["a"])(),connected:!1,name:"newUser-"+Object(p["a"])(),color:this.randomColor(),x:0,y:0,typing:null},users:{},messages:{},registered:localStorage.me,visited:localStorage.uid,hasUsers:localStorage.users,hasMessages:localStorage.messages,doNotSave:!1,editing:!1,scrolling:!1,dragging:!1,windowWidth:window.innerWidth,windowHeight:window.innerHeight,windowLeft:null,windowTop:null,scale:5,grid:!1}},created:function(){this.registered?this.me=JSON.parse(localStorage.me):this.visited?(this.me.uid=localStorage.uid,this.me.color=localStorage.color):(localStorage.uid=this.me.uid,localStorage.color=this.me.color),this.hasUsers&&(this.users=JSON.parse(localStorage.users)),this.hasMessages&&(this.messages=JSON.parse(localStorage.messages))},mounted:function(){var e=this;this.track();var t=this.$refs.userlandContainer;this.windowLeft=t.scrollLeft,this.windowTop=t.scrollTop,t.addEventListener("scroll",(function(){e.windowLeft=t.scrollLeft,e.windowTop=t.scrollTop})),window.addEventListener("resize",(function(){e.windowWidth=window.innerWidth,e.windowHeight=window.innerHeight}));var s,n={x:(this.scale*this.windowWidth-this.windowWidth)/2,y:(this.scale*this.windowHeight-this.windowHeight)/2};if(this.wantsToView){var i=this.wantsToView.type,r=this.wantsToView.name;if("user"==i){var o=this.findUser(r);s=o?this.getUserPosition(o):n}else"page"==i&&console.log("page")}else s=n;this.scrollTo(s,"smooth")},sockets:{connect:function(){this.me.connected=!0,this.$socket.emit("user",this.me)},user:function(e){var t=JSON.parse(e);t.uid!==this.me.uid&&(this.$set(this.users,t.uid,t),this.$socket.emit("users",this.users))},users:function(e){var t=this,s=JSON.parse(e);for(var i in Xe.push(s),Xe.sort((function(e,t){return Object.keys(t).length-Object.keys(e).length})),n=Xe[0],Xe.forEach((function(e){for(var s in e)n[s]||(s!==t.me.uid?n[s]=e[s]:console.log("false alarm, its you."))})),n){var r=n[i];i!==this.me.uid&&this.$set(this.users,i,r)}localStorage.users=JSON.stringify(this.users)},message:function(e){var t=JSON.parse(e);this.$set(this.messages,t.uid,t),this.$socket.emit("messages",this.messages)},messages:function(e){var t=JSON.parse(e);for(var s in De.push(t),De.sort((function(e,t){return Object.keys(t).length-Object.keys(e).length})),i=De[0],De.forEach((function(e){for(var t in e)i[t]||(i[t]=e[t])})),i){var n=i[s];this.$set(this.messages,s,n)}localStorage.messages=JSON.stringify(this.messages)},position:function(e){var t=JSON.parse(e);t.uid!==this.me.uid&&(this.$set(this.users,t.uid,t),localStorage.users=JSON.stringify(this.users))},appearance:function(e){var t=JSON.parse(e);t.uid!==this.me.uid&&(this.$set(this.users,t.uid,t),localStorage.users=JSON.stringify(this.users))},typing:function(e){var t=JSON.parse(e);t.uid!==this.me.uid&&(this.$set(this.users,t.uid,t),localStorage.users=JSON.stringify(this.users))},userDisconnect:function(e){var t=JSON.parse(e);t.uid!==this.me.uid&&(this.$set(this.users,t.uid,t),localStorage.users=JSON.stringify(this.users))},clearDBs:function(){this.users={},localStorage.users=JSON.stringify(this.users),this.messages={},localStorage.messages=JSON.stringify(this.messages),window.location.reload(!0)},disconnect:function(){this.me.connected=!1,this.doNotSave||(localStorage.me=JSON.stringify(this.me),localStorage.users=JSON.stringify(this.users),localStorage.messages=JSON.stringify(this.messages))}},methods:{saveMe:function(e){this.me.name=e.name,this.me.color=e.color,this.$socket.emit("user",this.me),this.registered=!0,this.editing=!1,localStorage.me=JSON.stringify(this.me)},deleteMe:function(){this.me.deleted=!0,this.getUserMessages(this.me).forEach((function(e){return e.deleted=!0})),this.$socket.emit("user",this.me),this.$socket.emit("message",{}),this.doNotSave=!0,localStorage.clear(),window.location.reload(!0)},deleteEverything:function(){this.$socket.emit("clearDBs")},updatePosition:function(e){var t=(this.windowLeft+e.x)/(this.windowWidth*this.scale),s=(this.windowTop+e.y)/(this.windowHeight*this.scale);this.me.x=t,this.me.y=s,this.me.connected=!0,this.$socket.emit("position",this.me)},updateColor:function(e){this.me.color=e.color,this.$socket.emit("appearance",this.me),localStorage.me=JSON.stringify(this.me)},updateAppearance:function(e){this.me.name=e.name,this.me.color=e.color,this.$socket.emit("appearance",this.me),this.editing=!1,localStorage.me=JSON.stringify(this.me)},updateTyping:function(e){this.me.typing=e,this.$socket.emit("typing",this.me)},sendMessage:function(e){e.content&&" "!=e.content&&this.$socket.emit("message",e)},constructMessage:function(e){var t=(new Date).getTime(),s={uid:this.me.uid+t,author:this.me.uid,content:e,time:t,color:this.me.color,x:this.me.x,y:this.me.y};return s},findUser:function(e){var t=Object.values(this.users),s=t.find((function(t){return t.name==e}));if(s)return this.users[s.uid]},getUserPosition:function(e){return e=this.toPixels(e),{x:e.x-this.windowWidth/2,y:e.y-this.windowHeight/2}},getUserNames:function(){var e=Object.values(this.users),t=e.map((function(e){return e.name}));return t},getUserMessages:function(e){var t=[];for(var s in this.messages){var n=this.messages[s];n.author==e.uid&&t.push(n)}return t},miniClick:function(e){console.log(e),this.scrollTo({x:e.clientX,y:e.clientY},"smooth")},toPixels:function(e){return{x:e.x*this.scale*this.windowWidth,y:e.y*this.scale*this.windowHeight}},scrollTo:function(e,t){this.$refs.userlandContainer.scroll({left:e.x,top:e.y,behavior:t||"auto"})},randomColor:function(){var e=Math.floor(256*Math.random()),t=Math.floor(256*Math.random()),s=Math.floor(256*Math.random()),n=1,i="rgb(".concat(e,", ").concat(t,", ").concat(s,", ").concat(n,")");return i},track:function(){var e,t,s=this,n=this.$refs.me.$refs.Cursor.$refs.input;document.addEventListener("keyup",(function(i){if(s.registered&&!s.editing){var r=i.which||i.keyCode;if(n!==document.activeElement&&(n.focus(),r>=48&&r<=90)){var o=String.fromCharCode(r);n.value=o}"~"==n.value&&(t=!0);var a=s.getUserMessages(s.me),c=a[0],u=a[a.length-1],l=a[a.indexOf(e)-1],d=a[a.indexOf(e)+1];if(38==r)e=e?l||c:u,n.value=e.content,n.select();else if(40==r)e&&d&&(e=d,n.value=e.content,n.select());else if(13==r){if(t){var h=n.value.slice(1);s.$router.push("~".concat(h)),t=!1}else{var f=s.constructMessage(n.value);s.sendMessage(f),e=void 0}n.value="",n.placeholder=""}else 27==r&&(n.value="",n.blur());s.updateTyping(n.value),i.stopPropagation(),i.preventDefault()}})),document.addEventListener("click",(function(){if(s.registered&&!s.editing){var t=s.constructMessage(n.value);s.sendMessage(t),e=void 0,n.value="",n.placeholder=""}}))}}},Ye=Fe,Be=(s("9fe0"),Object(O["a"])(Ye,f,m,!1,null,null,null)),Ge=Be.exports,Ze={name:"Home",components:{Userland:Ge},props:["slug"],data:function(){return{loaded:!1,status:"loading...",isMobile:!!c.$root.isMobile,wantsToView:null}},created:function(){var e=this;c.$root.isMobile&&(this.isMobile=!0),l.a.polyfill(),this.$http.get(this.$apiURL+"/hosts").then((function(t){e.hosts=t.data,e.loaded=!0,e.msg="ready."})).catch((function(t){console.log(t),e.msg="there is an error :( contact karl <bonjour@moubarak.eu>"})),this.slug&&this.handleRouting(this.slug)},mounted:function(){var e=this;this.$router.afterEach((function(t){var s=t.path.replace(e.$publicPath,"");e.handleRouting(s)}))},methods:{handleRouting:function(e){var t,s;e.startsWith("~")?(t="user",s=e.slice(1),s?console.log(s):console.log("no username provided")):console.log("not a user"),this.wantsToView={type:t,name:s}}}},qe=Ze,Ke=(s("cccb"),Object(O["a"])(qe,d,h,!1,null,null,null)),Qe=Ke.exports,et={name:"App",components:{Home:Qe},data:function(){return{isMobile:Boolean,slug:window.location.pathname.replace(this.$publicPath,"")}},created:function(){this.CheckForMobile(),window.addEventListener("resize",this.CheckForMobile),l.a.polyfill()},methods:{CheckForMobile:function(){window.innerWidth<=760?(c.$root.isMobile=!0,this.isMobile=!0):(c.$root.isMobile=!1,this.isMobile=!1)}}},tt=et,st=(s("034f"),Object(O["a"])(tt,o,a,!1,null,null,null)),nt=st.exports,it=s("8c4f");r["a"].use(it["a"]);var rt=[{path:"/",name:"Home",component:Qe}],ot=new it["a"]({mode:"history",routes:rt}),at=ot,ct=s("bc3a"),ut=s.n(ct),lt=s("5132"),dt=s.n(lt),ht=s("8e27"),ft=s.n(ht),mt=s("9ce6"),pt=s.n(mt),gt=s("0576"),vt=s.n(gt);r["a"].prototype.$http=ut.a,r["a"].prototype.$apiURL="https://api.obfuscation.karls.computer",r["a"].prototype.$publicPath="/",r["a"].config.productionTip=!1,pt.a.props.anchorAttributes.default=function(){return{target:"_blank",rel:"noopener noreferrer nofollow"}},r["a"].component("vue-markdown",pt.a),r["a"].use(vt.a);var wt=ft()("https://io.karls.computer");r["a"].use(new dt.a({connection:wt})),new r["a"]({router:at,render:function(e){return e(nt)}}).$mount("#app")},"5b46":function(e,t,s){"use strict";s("b16f")},"5ced":function(e,t,s){},"5d27":function(e,t,s){},"5d4f":function(e,t,s){},"6a23":function(e,t,s){},"7de5":function(e,t,s){},"7f34":function(e,t,s){},"85ec":function(e,t,s){},8855:function(e,t,s){"use strict";s("7f34")},"9fe0":function(e,t,s){"use strict";s("7de5")},a7cb:function(e,t,s){"use strict";s("d6ce")},a8e5:function(e,t,s){},afbc:function(e,t,s){},b16f:function(e,t,s){},bc72:function(e,t,s){"use strict";s("a8e5")},c1f5:function(e,t,s){"use strict";s("6a23")},c42b:function(e,t,s){},cccb:function(e,t,s){"use strict";s("5ced")},d5c0:function(e,t,s){"use strict";s("5d4f")},d6ce:function(e,t,s){},eaa7:function(e,t,s){"use strict";s("37cb")},f38d:function(e,t,s){},f87e:function(e,t,s){"use strict";s("afbc")},fe21:function(e,t,s){"use strict";s("5d27")}});
//# sourceMappingURL=app.be6995bd.js.map