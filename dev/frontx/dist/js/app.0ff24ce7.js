(function(t){function e(e){for(var s,i,a=e[0],c=e[1],u=e[2],d=0,f=[];d<a.length;d++)i=a[d],Object.prototype.hasOwnProperty.call(o,i)&&o[i]&&f.push(o[i][0]),o[i]=0;for(s in c)Object.prototype.hasOwnProperty.call(c,s)&&(t[s]=c[s]);l&&l(e);while(f.length)f.shift()();return r.push.apply(r,u||[]),n()}function n(){for(var t,e=0;e<r.length;e++){for(var n=r[e],s=!0,a=1;a<n.length;a++){var c=n[a];0!==o[c]&&(s=!1)}s&&(r.splice(e--,1),t=i(i.s=n[0]))}return t}var s={},o={app:0},r=[];function i(e){if(s[e])return s[e].exports;var n=s[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=t,i.c=s,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)i.d(n,s,function(e){return t[e]}.bind(null,s));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="/";var a=window["webpackJsonp"]=window["webpackJsonp"]||[],c=a.push.bind(a);a.push=e,a=a.slice();for(var u=0;u<a.length;u++)e(a[u]);var l=c;r.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"00b8":function(t,e,n){"use strict";n("3c15")},"01b9":function(t,e,n){"use strict";n("2942")},"034f":function(t,e,n){"use strict";n("85ec")},"0613":function(t,e,n){"use strict";n("84ac")},"06e5":function(t,e,n){"use strict";n("b917")},"0859":function(t,e,n){"use strict";n("3cee")},"08c4":function(t,e,n){"use strict";n("1213")},"0ee6":function(t,e,n){"use strict";n("5949")},"0fe3":function(t,e,n){},"101a":function(t,e,n){},1213:function(t,e,n){},1508:function(t,e,n){},1812:function(t,e,n){"use strict";n("101a")},"1c50":function(t,e,n){},2156:function(t,e,n){},2650:function(t,e,n){},2942:function(t,e,n){},"2a5d":function(t,e,n){"use strict";n("b191")},"2b7d":function(t,e,n){"use strict";n("71d9")},"32a0":function(t,e,n){"use strict";n("5d18")},3551:function(t,e,n){"use strict";n("f091")},"3bc9":function(t,e,n){"use strict";n("1c50")},"3c15":function(t,e,n){},"3cee":function(t,e,n){},"425f":function(t,e,n){},4496:function(t,e,n){"use strict";n("425f")},"48d6":function(t,e,n){"use strict";n("6b3f")},"4d50":function(t,e,n){},"4ea2":function(t,e,n){"use strict";n("1508")},5177:function(t,e,n){"use strict";n("f7c7")},"56d7":function(t,e,n){"use strict";n.r(e);n("e260"),n("e6cf"),n("cca6"),n("a79d");var s=n("2b0e"),o=n("bc3a"),r=n.n(o),i=n("9ce6"),a=n.n(i),c=n("f87c"),u=n("8e27"),l=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("Home",{attrs:{slug:t.slug}})],1)},d=[],f=(n("ac1f"),n("5319"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"home"}},[t.blocked?n("Nomansland"):t.loading?t._e():n("Mainland",{attrs:{wantsToView:t.wantsToView}})],1)}),m=[],h=(n("fb6a"),n("2ca0"),n("2f62")),p=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{class:[{blur:!t.registered||t.editing},t.location.slug],style:[t.userColors,{"--scale":t.scale}]},[!t.registered||t.editing?n("Editor",{on:{stopEdit:function(e){t.editing=!1}}}):t._e(),n("header",[n("div",{attrs:{id:"navTitle"}},[n("span",{class:{selected:!t.desiresList},on:{click:function(e){e.stopPropagation(),t.desiresList=!1}}},[t._v(" map ")]),n("span",{class:{selected:t.desiresList},on:{click:function(e){e.stopPropagation(),t.desiresList=!0}}},[t._v(" list ")])]),t.desiresList?n("Minilist",{on:{goTo:function(e){t.scrollTo(t.pixelsFrom(e),"smooth")}}}):n("Minimap",{attrs:{dragging:t.dragging,miniDragging:t.miniDragging},on:{startedDrag:function(e){t.miniDragging=!0},stoppedDrag:function(e){t.miniDragging=!1},newPosition:function(e){return t.handleMini(e)},zero:t.centerMe}}),n("Options",{on:{startEdit:function(e){t.editing=!0}}}),n("Userslist",{on:{goTo:function(e){return t.goTo(e)}}})],1),n("div",{ref:"userlandContainer",class:[{dragging:t.dragging}],attrs:{id:"userlandContainer"},on:{scroll:function(e){return e.stopPropagation(),t.setViewerPosition()},keyup:function(e){return t.handleInput(e)},click:function(e){return t.handleClick(e)}}},[n("div",{attrs:{id:"location"}},[n("span",[t._v(" #"+t._s(t.location.slug)+" ")])]),n("div",{ref:"userland",style:{height:100*t.scale+"%",width:100*t.scale+"%"},attrs:{id:"userland"},on:{mousedown:function(e){e.stopPropagation(),t.dragging=!0},mousemove:function(e){return t.drag(e)},mouseup:function(e){return e.stopPropagation(),t.dragRelease()}}},[n("Grid"),t._l(t.notDeletedUsers,(function(e){return n("Cursorr",{key:e.uid,ref:t.isMe(e)?"me":"Users",refInFor:!0,attrs:{user:e,dragging:t.isMe(e)?t.dragging:null}})})),t._l(t.notDeletedMessages,(function(e){return n("Message",{key:e.uid,attrs:{message:e,isMe:e.authorUID===t.me.uid},on:{goTo:function(e){t.goTo(t.userByName(e))}}})})),t._l(t.territories,(function(t){return n("Territory",{key:t.slug,attrs:{territory:t}})}))],2)]),n("Overlay",{attrs:{id:"overlay",wantsToView:t.moreInformation}})],1)},g=[],v=(n("99af"),n("b0c0"),n("1276"),n("5530")),y=n("8a77"),b=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("table",{class:{hidden:!t.$store.state.grid},attrs:{id:"grid"}},[n("tbody",t._l(t.scale*t.definition,(function(e){return n("Row",{key:e,attrs:{x:t.scale*t.definition}})})),1)])},w=[],_=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("tr",t._l(t.x,(function(t){return n("Cell",{key:t})})),1)},C=[],O=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("td")},x=[],$={name:"Cell"},k=$,S=(n("4ea2"),n("2877")),M=Object(S["a"])(k,O,x,!1,null,"11852a59",null),j=M.exports,T={name:"Row",components:{Cell:j},props:["x"]},P=T,D=Object(S["a"])(P,_,C,!1,null,"4ed0d323",null),U=D.exports,E={name:"Table",components:{Row:U},data:function(){return{scale:10,definition:10}}},N=E,I=(n("6cb2"),Object(S["a"])(N,b,w,!1,null,"0e89f54d",null)),z=I.exports,L=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"registerContainer"}},[n("div",{attrs:{id:"register"}},[t.registered?t._e():n("div",{staticClass:"introText"},[n("h3",[t._v("Welcome.")]),n("p",[t._v("To join the conversation, please pick a display name and color. You can change these later.")])]),n("div",{staticClass:"form"},[n("input",{ref:"name",attrs:{type:"text",placeholder:"pick a display name"}}),t.invalid||t.tooshort||t.inuse?n("p",{staticClass:"error"},[t._v(" "+t._s(t.invalid?"Your display name cannot contain any spaces or special characters.":t.tooshort?"Your display name must contain at least 3 characters.":t.inuse?"This name has already been taken by someone else.":null)+" ")]):t._e(),n("input",{ref:"color",attrs:{type:"text","data-jscolor":""},on:{input:t.updateColor}}),n("input",{ref:"submit",attrs:{type:"button",value:"save"},on:{click:function(e){return e.stopPropagation(),t.save()}}})]),t.registered?t._e():n("div",{staticClass:"introText"},[n("p",[t._v("This site does not use cookies. The information you are entering is stored in your browser and sent to all the other users.")])])])])},B=[],H=(n("c975"),n("4d63"),n("25f0"),n("881d")),X=n.n(H),R={name:"Editor",data:function(){return{invalid:!1,tooshort:!1,inuse:!1,colorPickerOpts:{format:"rgba",previewPosition:"right",previewSize:30,borderRadius:0,padding:0,controlBorderColor:"rgba(255,255,255,0)",sliderSize:13,shadow:!1}}},computed:Object(v["a"])(Object(v["a"])({},Object(h["e"])(["registered"])),Object(h["c"])(["me","userNames"])),mounted:function(){var t=this;X.a.presets.default=this.colorPickerOpts,this.$refs.color.value=this.me.color,X.a.init(),this.registered&&(this.$refs.name.value=this.me.name,this.$refs.name.select()),this.$nextTick((function(){t.registered&&new X.a(t.$refs.color)}))},methods:{save:function(){var t=this.$refs.name.value,e=this.$refs.color.value;this.validateChars(t)?this.validateLength(t)?this.existingUser(t)?this.inuse=!0:this.register(t,e):this.tooshort=!0:this.invalid=!0},cancel:function(){this.$emit("stopEdit")},register:function(t,e){this.$store.dispatch("updateSelf",{name:t,color:e}),this.$emit("stopEdit")},updateColor:function(){this.$store.dispatch("updateSelfAppearance",{color:this.$refs.color.value})},validateChars:function(t){return/^[A-Za-z0-9]+(?:-[A-Za-z0-9]+)*$/.test(t)},validateLength:function(t){return t.length>2},existingUser:function(t){return this.userNames.indexOf(t)>-1&&t!==this.me.name},toSlug:function(t){t=t.replace(/^\s+|\s+$/g,""),t=t.toLowerCase();for(var e="àáäâèéëêìíïîòóöôùúüûñç·/_,:;",n="aaaaeeeeiiiioooouuuunc------",s=0,o=e.length;s<o;s++)t=t.replace(new RegExp(e.charAt(s),"g"),n.charAt(s));return t=t.replace(/[^a-z0-9 -]/g,"").replace(/\s+/g,"-").replace(/-+/g,"-"),t}}},J=R,V=(n("4496"),Object(S["a"])(J,L,B,!1,null,"76cee09c",null)),A=V.exports,F=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{class:{hovered:t.hovered||t.dragging},style:{height:t.height+"px",width:t.width+"px"},attrs:{id:"minimap"},on:{mouseover:function(e){t.hovered=!0},mouseout:function(e){t.hovered=!1},mousedown:function(e){return t.mouseDown(e)},mousemove:function(e){return t.mouseMove(e)},mouseup:function(e){return t.mouseUp(e)}}},[t._l(t.users,(function(t){return n("Cursorr",{key:t.uid,attrs:{user:t}})})),t._l(t.messages,(function(e){return n("Message",{key:e.uid,attrs:{message:e,hovered:t.hovered,dragging:t.dragging}})})),n("Window",{attrs:{id:"viewport",width:t.width/t.scale,height:t.height/t.scale,left:t.left/t.scale,top:t.top/t.scale}}),t._l(t.territories,(function(e){return n("Territory",{key:e.slug,attrs:{hovered:t.hovered,territory:e},nativeOn:{mousedown:function(e){return t.handleTerrMouseDown(e)},mousemove:function(e){return t.handleTerrMouseMove(e)},mouseup:function(n){return t.handleTerrMouseUp(n,e)}}})})),n("div",{staticClass:"zoom"},[n("div",{staticClass:"in",on:{mousedown:function(e){return e.stopPropagation(),t.$store.commit("zoomIn")},mouseup:function(t){t.stopPropagation()}}},[t._v("+")]),n("div",{staticClass:"out",on:{mousedown:function(e){return e.stopPropagation(),t.$store.commit("zoomOut")},mouseup:function(t){t.stopPropagation()}}},[t._v("-")]),n("div",{staticClass:"zero",on:{mousedown:function(e){return e.stopPropagation(),t.$emit("zero")},mouseup:function(t){t.stopPropagation()}}},[t._v("○")])])],2)},W=[],Y=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"cursor",style:{left:100*t.user.x-.1+"%",top:100*t.user.y-.2+"%","--scale":3,"--userColor":"var(--"+t.user.uid+")"}})},G=[],q={name:"Cursorr",props:["user"]},Z=q,K=(n("ece6"),Object(S["a"])(Z,Y,G,!1,null,"fe9074ea",null)),Q=K.exports,tt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{class:["minimessage",{clear:t.hovered||t.dragging}],style:{left:t.toNearestX(t.message.x,.4)+"%",top:t.toNearestX(t.message.y,.4)+"%",width:t.message.content.length/2+"px","--userColor":"var(--"+t.message.authorUID+")"}})},et=[],nt={name:"Message",props:["message","hovered","dragging"],methods:{toNearestX:function(t,e){return Math.floor(100*t/e)*e}}},st=nt,ot=(n("87e3"),Object(S["a"])(st,tt,et,!1,null,null,null)),rt=ot.exports,it=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{class:["mini-territory",{hovered:t.hovered,circle:t.isCircle}],style:{left:t.toNearestX(t.territory.borders.x,.4)+"%",top:t.toNearestX(t.territory.borders.y,.4)+"%",height:t.miniSize.h+"px",width:t.miniSize.w+"px"},attrs:{id:"mini-"+t.territory.slug}},[n("div",{staticClass:"box"},[n("div",{staticClass:"background"},[n("vue-markdown",[t._v(" "+t._s(t.territory.name)+" ")])],1)])])},at=[],ct={name:"Territory",props:["territory","hovered"],computed:{miniSize:function(){var t=document.querySelector("#".concat(this.territory.slug)),e=t.scrollHeight,n=t.scrollWidth,s=.04*e,o=.04*n;return{h:s,w:o}},isCircle:function(){return"reception"===this.territory.slug||"hangout"===this.territory.slug}},mounted:function(){},methods:{toNearestX:function(t,e){return Math.floor(100*t/e)*e}}},ut=ct,lt=(n("84fa"),Object(S["a"])(ut,it,at,!1,null,null,null)),dt=lt.exports,ft=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{style:{width:t.width+"px",height:t.height+"px",left:t.left+"px",top:t.top+"px"}})},mt=[],ht={name:"Window",props:["width","height","left","top"]},pt=ht,gt=(n("48d6"),Object(S["a"])(pt,ft,mt,!1,null,"05c2008c",null)),vt=gt.exports,yt={name:"Map",components:{Cursorr:Q,Message:rt,Territory:dt,Window:vt},props:["dragging","miniDragging"],data:function(){return{hovered:!1}},computed:Object(v["a"])(Object(v["a"])({},Object(h["e"])({territories:function(t){return t.territories},left:function(t){return t.windowPos.x/5},top:function(t){return t.windowPos.y/5},width:function(t){return t.windowSize.w/5},height:function(t){return t.windowSize.h/5},scale:function(t){return t.scale},zoomIndex:function(t){return 5*t.scale}})),Object(h["c"])({users:"notDeletedUsers",messages:"notDeletedMessages"})),methods:{mouseDown:function(t){this.sendDesiredPosition(t),this.$emit("startedDrag")},mouseMove:function(t){this.miniDragging&&this.sendDesiredPosition(t)},mouseUp:function(t){this.$emit("stoppedDrag"),this.sendDesiredPosition(t)},handleTerrMouseDown:function(){},handleTerrMouseMove:function(){},handleTerrMouseUp:function(){},sendDesiredPosition:function(t){var e=t.pageX-this.$el.offsetLeft,n=this.width/(2*this.scale),s=(e-n)*this.zoomIndex,o=t.pageY-this.$el.offsetTop,r=this.height/(2*this.scale),i=(o-r)*this.zoomIndex;this.$emit("newPosition",{x:s,y:i})}}},bt=yt,wt=(n("3551"),Object(S["a"])(bt,F,W,!1,null,"442f99b2",null)),_t=wt.exports,Ct=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"options"}},[n("div",{staticClass:"grid"},[n("input",{attrs:{type:"button",value:t.grid?"hide grid":"show grid"},on:{click:function(e){return e.stopPropagation(),t.toggleGrid(e)}}})]),n("div",{staticClass:"edituser"},[n("input",{attrs:{type:"button",value:"edit appearance"},on:{click:function(e){return e.stopPropagation(),t.$emit("startEdit")}}})]),n("div",{staticClass:"storage"},[n("input",{attrs:{type:"button",value:"delete me"},on:{click:function(e){return e.stopPropagation(),t.deleteSelf(e)}}})])])},Ot=[],xt={name:"Options",computed:Object(v["a"])({},Object(h["e"])(["grid"])),methods:Object(v["a"])(Object(v["a"])({},Object(h["d"])(["toggleGrid"])),Object(h["b"])(["deleteSelf"]))},$t=xt,kt=(n("8e25"),Object(S["a"])($t,Ct,Ot,!1,null,"cea85340",null)),St=kt.exports,Mt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{class:{moderating:t.moderating},attrs:{id:"userlist"}},[n("div",{staticClass:"title"},[n("span",[t._v("participants")]),n("div",{attrs:{id:"moderate"}},[n("span",{staticClass:"moderateButton",on:{click:function(e){t.moderating?t.moderating=!1:t.moderator?t.moderating=!0:t.authenticating?t.authenticating=!1:t.authenticating=!0}}},[t.moderating?n("span",[t._v("—")]):n("span",[t._v("M")])]),t.authenticating?n("input",{ref:"password",attrs:{type:"password",name:"moderator",placeholder:"moderator password",autofocus:""},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.authenticate()}}}):t._e()])]),n("ul",t._l(t.connectedUsersFirst,(function(e){return n("Label",{key:e.uid,attrs:{user:e,isMe:e.uid===t.me.uid,moderating:t.moderating,messages:t.messagesByUser(e)},on:{goTo:function(e){return t.$emit("goTo",e)}},nativeOn:{click:function(n){return n.stopPropagation(),t.$emit("goTo",e)}}})})),1)])},jt=[],Tt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("li",{class:["userLabel",t.user.uid],style:{"--userColor":"var(--"+t.user.uid+")"},on:{mouseover:function(e){e.stopPropagation(),t.hovered=!0},mouseleave:function(e){e.stopPropagation(),t.hovered=!1}}},[n("span",{staticClass:"bullet"},[t._v(" ● ")]),n("span",{staticClass:"name"},[t._v(" "+t._s(t.isMe?"me":t.user.name)+" ")]),t.moderating?n("div",{staticClass:"moderatorOptions"},[n("span",{staticClass:"messages",on:{click:function(e){e.stopPropagation(),t.messagesVisible=!t.messagesVisible}}},[t._v("messages")]),n("span",{staticClass:"delete",on:{click:function(e){return e.stopPropagation(),t.$store.dispatch("deleteUser",t.user)}}},[t._v("delete")])]):t._e(),n("span",{staticClass:"goto"},[t._v(" "+t._s(t.hovered?"→":""))]),t.moderating&&t.messagesVisible?n("div",{staticClass:"messageListContiner"},[t.messages.length>0?n("ul",{staticClass:"messageList"},t._l(t.messages,(function(e){return n("MessageOptions",{key:e.uid,attrs:{message:e},nativeOn:{click:function(n){return n.stopPropagation(),t.$emit("goTo",e)}}})})),1):n("p",[t._v("This user has no messaages.")])]):t._e()])},Pt=[],Dt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{class:["miniMessageContainer",{hover:t.hovered}],on:{mouseover:function(e){t.hovered=!0},mouseleave:function(e){t.hovered=!1}}},[n("span",{staticClass:"message"},[t._v(" "+t._s(t.message.content)+" ")]),n("span",{staticClass:"time"},[t._v(" "+t._s(t.format(t.message.time))+" ")]),n("span",{staticClass:"delete",on:{click:function(e){return e.stopPropagation(),t.deleteMessage(t.message)}}},[t._v("delete")]),t.message.censored?n("span",{staticClass:"delete",on:{click:function(e){return e.stopPropagation(),t.censorMessage(t.message)}}},[t._v("uncensor")]):n("span",{staticClass:"delete",on:{click:function(e){return e.stopPropagation(),t.censorMessage(t.message)}}},[t._v("censor")]),n("span",{staticClass:"goto"},[t._v(" "+t._s(t.hovered?"→":""))])])},Ut=[],Et=n("f817"),Nt={name:"MessageOptions",components:{},props:["message"],data:function(){return{now:(new Date).getTime(),hovered:!1}},mounted:function(){},methods:Object(v["a"])(Object(v["a"])({},Object(h["b"])(["deleteMessage","censorMessage"])),{},{format:function(t){return Object(Et["a"])(t).format("MMM Do @ HH:mm:ss ")}})},It=Nt,zt=(n("dcd8"),Object(S["a"])(It,Dt,Ut,!1,null,"1c25b57c",null)),Lt=zt.exports,Bt={name:"Label",components:{MessageOptions:Lt},props:["isMe","user","messages","moderating"],data:function(){return{hovered:!1,messagesVisible:!1}},mounted:function(){},methods:{}},Ht=Bt,Xt=(n("5177"),Object(S["a"])(Ht,Tt,Pt,!1,null,"8605b20e",null)),Rt=Xt.exports,Jt={name:"List",components:{Label:Rt},props:[],data:function(){return{moderator:!1,authenticating:!1,moderating:!1}},computed:Object(v["a"])({},Object(h["c"])({me:"me",users:"notDeletedUsers",messages:"notDeletedMessages",messagesByUser:"messagesByUser",connectedUsersFirst:"connectedUsersFirst"})),mounted:function(){},sockets:{},methods:{authenticate:function(){var t=this.$refs.password.value;"0000"===t&&(this.moderator=!0,this.authenticating=!1,this.moderating=!0)}}},Vt=Jt,At=(n("01b9"),Object(S["a"])(Vt,Mt,jt,!1,null,"59a1399d",null)),Ft=At.exports,Wt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{class:["cursorContainer",{hovered:t.user.typing||t.hovered,dragging:t.dragging}],style:{left:100*t.user.x-.1+"%",top:100*t.user.y-.2+"%","--scale":15,"--userColor":"var(--"+t.user.uid+")"},on:{mouseover:function(e){t.hovered=!0},mouseout:function(e){t.hovered=!1}}},[t.isMe(t.user)?n("input",{ref:"input",staticClass:"input",attrs:{type:"text",placeholder:"type message & press enter",autofocus:""}}):n("span",{staticClass:"input"},[t._v(" "+t._s(t.user.typing)+" ")]),n("div",{staticClass:"cursor"},[t.user.typing||t.hovered?n("span",{staticClass:"name"},[t._v(" "+t._s(t.isMe(t.user)?"me":t.user.connected?t.user.name:t.user.name+" (offline)")+" ")]):t._e()])])},Yt=[],Gt={name:"Cursorr",props:{user:Object,dragging:Boolean},data:function(){return{hovered:!1,current:String,navigation:!1,announcement:!1}},computed:Object(v["a"])(Object(v["a"])({},Object(h["e"])(["scale","windowSize","windowPos"])),Object(h["c"])(["me","isMe","messagesByUser"])),mounted:function(){this.isMe&&this.trackCursor()},methods:{updateTyping:function(t){this.$store.dispatch("updateSelfAppearance",{typing:t})},sendMessage:function(){var t=this.$refs.input,e=this.constructMessage(t.value);t.focus(),this.announcement?(e.announcement=!0,this.announcement=!1):this.navigation&&(e.navigation=!0,this.$router.push(t.value),this.navigation=!1),e.content&&" "!=e.content&&this.$socket.client.emit("message",e),this.current=null,t.value="",t.placeholder=""},constructMessage:function(t){var e=(new Date).getTime(),n={uid:this.me.uid+e,author:this.me.name,authorUID:this.me.uid,content:t,time:e,color:this.me.color,x:this.me.x,y:this.me.y,deleted:!1,censored:!1,announcement:!1};return n},trackCursor:function(){var t=this;document.addEventListener("mousemove",(function(e){t.$store.dispatch("updateSelfAppearance",{x:(t.windowPos.x+e.clientX)/(t.windowSize.w*t.scale),y:(t.windowPos.y+e.clientY)/(t.windowSize.h*t.scale),connected:!0}),e.preventDefault()}))},trackInput:function(t){var e=this.$refs.input,n=t.which||t.keyCode;if(e!==document.activeElement&&(e.focus(),n>=48&&n<=90)){var s=String.fromCharCode(n);e.value=s}"~"==e.value?this.navigation=!0:"!"==e.value&&(this.announcement=!0);var o=this.messagesByUser(this.me),r=o[0],i=o[o.length-1],a=o[o.indexOf(this.current)-1],c=o[o.indexOf(this.current)+1];38==n?(this.current?this.current=a||r:this.current=i,e.value=this.current.content,e.select()):40==n?(this.current&&c&&(this.current=c),e.value=this.current.content,e.select()):13==n?this.sendMessage():27==n&&(e.value="",e.blur()),this.updateTyping(e.value)}}},qt=Gt,Zt=(n("0859"),Object(S["a"])(qt,Wt,Yt,!1,null,"422b3fcd",null)),Kt=Zt.exports,Qt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return!t.message.navigation&&t.message.uid?n("div",{class:["messageContainer",{hover:t.hovered,announcement:t.message.announcement}],style:{left:t.toNearestX(t.message.x,.4)+"%",top:t.toNearestX(t.message.y,.4)+"%","--blur":"blur("+(t.now-t.message.time)/1e8+"px)","--userColor":"var(--"+t.message.authorUID+")"},attrs:{id:t.message.uid},on:{mouseover:function(e){t.hovered=!0},mouseleave:function(e){t.hovered=!1}}},[t.message.censored?n("div",{staticClass:"message censored"},[t._v(" This message has been censored by a moderator. ")]):n("vue-markdown",{staticClass:"message"},[t._v(" "+t._s(t.message.content)+" ")]),n("div",{staticClass:"details"},[n("span",[t._v(" — ")]),n("span",{staticClass:"author",on:{click:function(e){return e.stopPropagation(),t.$emit("goTo",t.message.author)}}},[t._v(t._s(t.message.author))]),n("span",{staticClass:"time"},[t._v(", "+t._s(t.fromNow(t.message.time)))]),t.isMe?n("span",[t._v(" ● ")]):t._e(),t.isMe?n("span",{staticClass:"delete",on:{click:function(e){return e.stopPropagation(),t.deleteMessage(t.message)}}},[t._v("delete")]):t._e()])],1):t._e()},te=[],ee={name:"Message",components:{},props:["isMe","message"],data:function(){return{now:(new Date).getTime(),hovered:!1}},mounted:function(){},methods:Object(v["a"])(Object(v["a"])({},Object(h["b"])(["deleteMessage"])),{},{fromNow:function(t){return Object(Et["a"])(t).fromNow()},toNearestX:function(t,e){return Math.floor(100*t/e)*e}})},ne=ee,se=(n("fd40"),Object(S["a"])(ne,Qt,te,!1,null,null,null)),oe=se.exports,re=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"territory",style:{left:t.toNearestX(t.territory.borders.x,.4)+"%",top:t.toNearestX(t.territory.borders.y,.4)+"%",width:"20%",height:"20%"},attrs:{id:t.slug}},[n("div",{staticClass:"background"},[n("vue-markdown",[t._v(" "+t._s(t.territory.name||t.territory.body)+" ")])],1),t.content&&"reception"===t.slug?n("Reception",{attrs:{content:t.content}}):t.content&&"exhibition"===t.slug?n("Exhibition",{attrs:{content:t.content}}):t.content&&"timetable"===t.slug?n("Timetable",{attrs:{content:t.content}}):t.content&&"glossary"===t.slug?n("Glossary",{attrs:{content:t.content}}):t.content&&"library"===t.slug?n("Library",{attrs:{content:t.content}}):t.content&&"hangout"===t.slug?n("Hangout",{attrs:{content:t.content}}):t.content?n("Island",{attrs:{name:t.territory.name,slug:t.territory.slug,content:t.content}}):t._e()],1)},ie=[],ae=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"reception"},t._l(t.content,(function(t){return n("Island",{key:t.slug,attrs:{section:t}})})),1)},ce=[],ue=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"island",style:{width:"20vh",height:"20vh"}},[n("div",{staticClass:"header"},[n("h1",{staticClass:"title",on:{mousedown:function(e){return e.stopPropagation(),t.$router.push("/statics/"+t.section.slug)}}},[t._v(" "+t._s(t.section.Title)+" ")])])])},le=[],de={name:"Island",components:{},props:["section"],data:function(){return{}},computed:{},created:function(){},methods:{}},fe=de,me=(n("3bc9"),Object(S["a"])(fe,ue,le,!1,null,"f2c961b4",null)),he=me.exports,pe={name:"Reception",components:{Island:he},props:["content"],data:function(){return{}},computed:{},created:function(){},methods:{}},ge=pe,ve=(n("06e5"),Object(S["a"])(ge,ae,ce,!1,null,"14cb2fe2",null)),ye=ve.exports,be=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"exhibition"},t._l(t.content,(function(t){return n("Island",{key:t.slug,attrs:{section:t}})})),1)},we=[],_e=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{class:["island",{active:t.active}],style:{minHeight:"30vh",width:"40vw"}},[n("div",{staticClass:"header"},[n("h1",{staticClass:"title",on:{mousedown:function(e){return e.stopPropagation(),t.$router.push("/videos/"+t.section.slug)}}},[t._v(" "+t._s(t.section.Name)+" ")]),n("h1",{staticClass:"play",on:{click:function(e){return e.stopPropagation(),t.play()}}},[t._v(" "+t._s(t.active?"pause":"play")+" ")])]),n("div",{staticClass:"body"},[n("video",{ref:"player",attrs:{controls:t.active,loop:t.active},on:{mouseover:function(t){t.stopPropagation()},mouseleave:function(t){t.stopPropagation()}}},[n("source",{attrs:{src:t.src,type:"video/mp4"}})])])])},Ce=[],Oe={name:"Island",components:{},props:["section"],data:function(){return{active:!1}},computed:{src:function(){return this.$apiURL+this.section.File.url}},created:function(){},methods:{play:function(){this.active?(this.$refs.player.pause(),this.active=!1):(this.$refs.player.play(),this.active=!0)}}},xe=Oe,$e=(n("00b8"),Object(S["a"])(xe,_e,Ce,!1,null,"3981d039",null)),ke=$e.exports,Se={name:"Exhibition",components:{Island:ke},props:["content"],data:function(){return{}},computed:{extraContent:function(){return this.content.length<=1?this.getMoreTerms():this.content}},created:function(){},methods:{getMoreTerms:function(){for(var t=[],e=0;e<30;e++)t.push(this.content[0]);return t}}},Me=Se,je=(n("2b7d"),Object(S["a"])(Me,be,we,!1,null,"721d93db",null)),Te=je.exports,Pe=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"timetable"},t._l(t.contentByDays,(function(e){return n("div",{key:e.date,staticClass:"day"},[n("h1",[t._v(t._s(t.cuteDate(e.date)))]),n("div",{staticClass:"sessionsContainer"},t._l(e.sessions,(function(t){return n("Island",{key:t.slug,attrs:{session:t}})})),1)])})),0)},De=[],Ue=(n("4de4"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"island",style:{width:t.getWidth()+"%",height:"25vh"}},[n("div",{staticClass:"time"},[n("span",{staticClass:"start"},[t._v(t._s(t.start))]),n("span",{staticClass:"end"},[t._v(" "+t._s(t.end))])]),n("div",{staticClass:"header"},[n("h1",{staticClass:"title",on:{mousedown:function(e){return e.stopPropagation(),t.$router.push("/sessions/"+t.session.slug)}}},[t._v(" "+t._s(t.session.Title)+" ")])]),t.hosts.length>0?n("div",{staticClass:"body"},[n("span",{staticClass:"hosts"},[n("span",[t._v(" with ")]),t._l(t.hosts,(function(e){return n("span",{key:e.Name,staticClass:"host"},[n("span",{staticClass:"name"},[t._v(t._s(e.Name))]),n("span",[t._v(", ")])])}))],2),n("span",{staticClass:"modertors"},t._l(t.moderators,(function(e){return n("span",{key:e.Name,staticClass:"moderator"},[t.isLast(e,t.moderators)?n("span",[t._v("and ")]):t._e(),n("span",{staticClass:"name"},[t._v(t._s(e.Name))]),n("span",[t._v(" (moderator)")]),t.isLast(e,t.moderators)?n("span",[t._v(". ")]):n("span",[t._v(", ")])])})),0)]):t._e()])}),Ee=[],Ne={name:"Island",components:{},props:["session"],data:function(){return{}},computed:{start:function(){return this.getHumanTime(this.session.Start)},end:function(){return this.getHumanTime(this.session.End)},time:function(){return"".concat(this.start," — ").concat(this.end)},hosts:function(){return this.session.hosts},moderators:function(){return this.session.moderators}},created:function(){},methods:{getWidth:function(){var t=this.getUnixTime(this.session.Start),e=this.getUnixTime(this.session.End),n=e-t,s=n/2e5;return s},getHumanTime:function(t){return Object(Et["a"])(t).format("HH:mm")},getUnixTime:function(t){return Object(Et["a"])(t).format("x")},isLast:function(t,e){return e.indexOf(t)===e.length-1}}},Ie=Ne,ze=(n("889b"),Object(S["a"])(Ie,Ue,Ee,!1,null,"1a357364",null)),Le=ze.exports,Be={name:"Territory",components:{Island:Le},props:["content"],data:function(){return{}},computed:{contentByDays:function(){var t,e,n,s,o=this;return this.content[0]&&(t=this.content[0].Start,e=this.content.filter((function(e){return o.sessionInDay(e,t)})),n=this.content[this.content.length-1].Start,s=this.content.filter((function(t){return o.sessionInDay(t,n)}))),{1:{date:t,sessions:e},2:{date:n,sessions:s}}}},created:function(){},methods:{sessionInDay:function(t,e){return this.getDay(t.Start)===this.getDay(e)},getDay:function(t){return Object(Et["a"])(t).format("D")},cuteDate:function(t){return Object(Et["a"])(t).format("dddd, MMMM Do")}}},He=Be,Xe=(n("aad5"),Object(S["a"])(He,Pe,De,!1,null,"282452b9",null)),Re=Xe.exports,Je=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"glossary"},t._l(t.extraContent,(function(t){return n("Island",{key:t.slug,attrs:{section:t}})})),1)},Ve=[],Ae=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"island",style:{}},[n("div",{staticClass:"header"},[n("h1",{staticClass:"title",on:{mousedown:function(e){return e.stopPropagation(),t.$router.push("/glossaries/"+t.section.slug)}}},[t._v(" "+t._s(t.section.Term)+" ")])])])},Fe=[],We={name:"Island",components:{},props:["section"],data:function(){return{}},computed:{},created:function(){},methods:{}},Ye=We,Ge=(n("6092"),Object(S["a"])(Ye,Ae,Fe,!1,null,"3817da2d",null)),qe=Ge.exports,Ze={name:"Glossary",components:{Island:qe},props:["content"],data:function(){return{}},computed:{extraContent:function(){return this.content.length<=1?this.getMoreTerms():this.content}},created:function(){},methods:{getMoreTerms:function(){for(var t=[],e=0;e<25;e++)t.push(this.content[0]);return t}}},Ke=Ze,Qe=(n("0ee6"),Object(S["a"])(Ke,Je,Ve,!1,null,"ea2e0f68",null)),tn=Qe.exports,en=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"library"},t._l(t.extraContent,(function(t){return n("Island",{key:t.slug,attrs:{section:t}})})),1)},nn=[],sn=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"island",style:{}},[n("div",{staticClass:"header"},[n("h1",{staticClass:"title",on:{mousedown:function(e){return e.stopPropagation(),t.handleClick()}}},[t._v(" "+t._s(t.section.Name)+" ")])])])},on=[],rn={name:"Island",components:{},props:["section"],data:function(){return{}},computed:{src:function(){return this.section.File?this.$apiURL+this.section.File.url:this.section.URL}},created:function(){console.log(this.section)},methods:{handleClick:function(){window.location.href=this.src}}},an=rn,cn=(n("08c4"),Object(S["a"])(an,sn,on,!1,null,"4abe384b",null)),un=cn.exports,ln={name:"Library",components:{Island:un},props:["content"],data:function(){return{}},computed:{extraContent:function(){return this.content.length<=1?this.getMoreTerms():this.content}},created:function(){},methods:{getMoreTerms:function(){for(var t=[],e=0;e<30;e++)t.push(this.content[0]);return t}}},dn=ln,fn=(n("ff8d"),Object(S["a"])(dn,en,nn,!1,null,"23dca36c",null)),mn=fn.exports,hn=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"hangout"})},pn=[],gn={name:"Reception",components:{},props:[],data:function(){return{}},computed:{},created:function(){},methods:{}},vn=gn,yn=(n("7188"),Object(S["a"])(vn,hn,pn,!1,null,"7ce63bac",null)),bn=yn.exports,wn=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"island",style:{width:"20%",height:"20%"}},[n("div",{staticClass:"header"},[n("h1",{staticClass:"title",on:{click:function(e){return t.$router.push("#"+t.slug)}}},[t._v(" "+t._s(t.content.Title)+" ")])]),n("div",{staticClass:"body"},[n("vue-markdown",{attrs:{source:t.content.Body}})],1)])},_n=[],Cn={name:"Island",components:{},props:["name","slug","content"],data:function(){return{}},computed:{},created:function(){},methods:{}},On=Cn,xn=(n("0613"),Object(S["a"])(On,wn,_n,!1,null,"bb4acf72",null)),$n=xn.exports,kn={name:"Territory",components:{Reception:ye,Exhibition:Te,Timetable:Re,Glossary:tn,Library:mn,Hangout:bn,Island:$n},props:["territory"],data:function(){return{content:[]}},computed:{slug:function(){return this.territory.slug},scale:function(){return this.$store.state.scale},windowWidth:function(){return this.$store.state.windowSize.w},windowHeight:function(){return this.$store.state.windowSize.h}},created:function(){var t=this.slug,e="reception"===t?"statics":"exhibition"===t?"videos":"timetable"===t?"sessions":"glossary"===t?"glossaries":"library"===t?"libraries":null;e&&this.getContent(e)},mounted:function(){},methods:{getContent:function(t){var e=this;this.$http.get("".concat(this.$apiURL,"/").concat(t)).then((function(t){e.content=t.data,console.log(e.content)})).catch((function(t){console.log(t)}))},toNearestX:function(t,e){return Math.floor(100*t/e)*e},getTerritorySize:function(){var t=this.$el,e=t.scrollWidth,n=t.scrollHeight,s=e/(this.scale*this.windowWidth),o=n/(this.scale*this.windowHeight);return{w:s,h:o}}}},Sn=kn,Mn=(n("57063"),Object(S["a"])(Sn,re,ie,!1,null,"8cfc3af6",null)),jn=Mn.exports,Tn=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{class:{hovered:t.hovered},attrs:{id:"list"},on:{mouseover:function(e){t.hovered=!0},mouseout:function(e){t.hovered=!1}}},t._l(t.territories,(function(e){return n("Territory",{key:e.slug,attrs:{territory:e},nativeOn:{click:function(n){return n.stopPropagation(),t.handleTerritoryClick(e)}}})})),1)},Pn=[],Dn=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("li",{class:["list-territory",{active:t.isActive}],attrs:{id:"list-"+t.territory.slug}},[n("span",{staticClass:"bullet"},[t._v(" ... ")]),n("span",{staticClass:"name"},[t._v(" "+t._s(t.territory.name)+" ")]),n("span",{staticClass:"goto"},[t._v(" → ")])])},Un=[],En={name:"Territory",props:["territory"],computed:{location:function(){return this.$store.state.location},isActive:function(){return this.territory.slug===this.location.slug}},methods:{toNearestX:function(t,e){return Math.floor(100*t/e)*e}}},Nn=En,In=(n("d009"),Object(S["a"])(Nn,Dn,Un,!1,null,null,null)),zn=In.exports,Ln={name:"List",components:{Territory:zn},props:[],data:function(){return{hovered:!1}},computed:Object(v["a"])(Object(v["a"])({},Object(h["e"])({territories:function(t){return t.territories}})),Object(h["c"])({})),methods:{handleTerritoryClick:function(t){var e=this.$router.history.current.hash,n="#".concat(t.slug);e===n?this.$emit("goTo",t.borders):this.$router.push("/".concat(n))}}},Bn=Ln,Hn=(n("a659"),Object(S["a"])(Bn,Tn,Pn,!1,null,"4b3235e2",null)),Xn=Hn.exports,Rn=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"overlayContainer",class:{peak:t.peak,hover:t.hover,visible:t.visible},on:{mouseover:function(e){e.stopPropagation(),t.peak&&(t.hover=!0)},mouseout:function(e){e.stopPropagation(),t.peak&&(t.hover=!1)},mouseup:function(e){e.stopPropagation(),t.peak&&t.hover&&(t.visible=!0)}}},[n("div",{staticClass:"overlay"},[n("span",{staticClass:"close",on:{click:function(e){e.stopPropagation(),t.visible=t.hover=!1}}},[t._v("✕")]),n("div",{staticClass:"content"},t._l(t.content,(function(t){return n("Section",{key:t.id,attrs:{section:t}})})),1)])])},Jn=[],Vn=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("section",[n("div",{staticClass:"header"},[n("h3",{staticClass:"subtitle"},[t._v(" "+t._s(t.section.Subtitle||t.section.Start)+" ")]),n("h1",{staticClass:"title"},[t._v(" "+t._s(t.section.Title||t.section.title||t.section.Name||t.section.name||t.section.Term)+" ")])]),n("div",{staticClass:"body"},[n("vue-markdown",{attrs:{source:t.section.Body||t.section.body||t.section.Description||t.section.description||t.section.Definition}})],1),n("div",{staticClass:"footer"},[n("vue-markdown",{attrs:{source:t.section.Source||""}})],1)])},An=[],Fn={name:"Section",props:["section"],data:function(){return{}},created:function(){}},Wn=Fn,Yn=(n("995d"),Object(S["a"])(Wn,Vn,An,!1,null,"36bb79c2",null)),Gn=Yn.exports,qn={name:"Overlay",components:{Section:Gn},props:["wantsToView"],data:function(){return{content:null,type:null,peak:!1,hover:!1,visible:!1}},computed:{location:function(){return this.$store.state.location},territoryBySlug:function(){return this.$store.getters.territoryBySlug}},watch:{location:function(t,e){t.slug!==e.slug&&("general"!==this.location.slug?(this.content=[],this.content[0]=this.territoryBySlug(this.location.slug),this.peak=!0):this.visible=this.hover=this.peak=!1)},wantsToView:function(t){var e=t.collection+"?slug="+t.page;this.updateContent(e),this.visible=this.peak=!0}},mounted:function(){},methods:{updateContent:function(t){var e=this;this.$http.get("".concat(this.$apiURL,"/").concat(t)).then((function(t){e.content=t.data[0].Sections||t.data,console.log(e.content)})).catch((function(t){console.log(t)}))}}},Zn=qn,Kn=(n("9e3e"),Object(S["a"])(Zn,Rn,Jn,!1,null,"1cd663bf",null)),Qn=Kn.exports,ts={name:"Mainland",components:{Editor:A,Minimap:_t,Minilist:Xn,Options:St,Userslist:Ft,Grid:z,Cursorr:Kt,Message:oe,Territory:jn,Overlay:Qn},props:{wantsToView:Object},data:function(){return{moreInformation:null,desiresList:!0,editing:!1,scrolling:!1,dragging:!1,miniDragging:!1,movement:{}}},computed:Object(v["a"])(Object(v["a"])({},Object(h["e"])(["registered","visited","blocked","users","messages","territories","location","scale","windowPos"])),Object(h["c"])(["me","isMe","territoryBySlug","territoryByBorders","userByName","userColors","notDeletedUsers","notDeletedMessages","positionOf","pixelsFrom"])),watch:{wantsToView:function(t){this.route(t)}},created:function(){var t,e,n;localStorage.me?(this.$store.commit("register"),t=JSON.parse(localStorage.me),t.deleted&&this.$store.commit("block")):localStorage.uid?(this.$store.commit("visit"),t={uid:localStorage.uid,color:localStorage.color}):(t={uid:Object(y["a"])(),connected:!1,name:"newUser-"+Object(y["a"])(),color:this.randomColor(),x:0,y:0,typing:null},localStorage.uid=t.uid,localStorage.color=t.color),this.$store.commit("setUID",t.uid),this.$store.commit("setUser",t),localStorage.users&&(e=JSON.parse(localStorage.users),this.$store.commit("setUsers",e)),localStorage.messages&&(n=JSON.parse(localStorage.messages),this.$store.commit("setMessages",n))},mounted:function(){var t=this;setTimeout((function(){t.wantsToView?t.route(t.wantsToView):t.$router.push("#reception")}),50)},sockets:{message:function(t){var e=JSON.parse(t);e.announcement&&this.scrollTo(this.positionOf(e),"smooth")}},methods:{route:function(t){var e,n=t.type,s=t.name;if(n){if("user"==n){var o=this.userByName(s);o?e=this.positionOf(o):console.log("not found")}else if("territory"==n){var r=this.territoryBySlug(s);r?e=this.pixelsFrom(r.borders):console.log("not found")}this.scrollTo(e,"smooth")}else{var i=s.split("/")[0],a=s.split("/")[1],c="statics"===i?"reception":"sessions"===i?"timetable":"videos"===i?"exhibition":"glossaries"===i?"glossary":null,u=this.territoryBySlug(c);e=this.pixelsFrom(u.borders),this.location.slug!==u.slug&&this.scrollTo(e,"smooth"),this.moreInformation={collection:i,page:a}}},handleInput:function(t){this.editing||this.$refs.me[0].trackInput(t)},handleClick:function(){this.editing||this.dragging||this.$refs.me[0].sendMessage()},handleMini:function(t){this.scrollTo(t,this.miniDragging?"auto":"smooth")},centerMe:function(){var t=this;this.$store.commit("zero"),setTimeout((function(){t.goTo({x:.5,y:.5})}),50)},goTo:function(t){this.scrollTo(this.positionOf(t),"smooth")},drag:function(t){if(this.dragging){var e={x:this.windowPos.x-t.movementX,y:this.windowPos.y-t.movementY};this.scrollTo(e),this.movement={x:e.x,y:e.y,extraX:10*t.movementX,extraY:10*t.movementY}}},dragRelease:function(){this.dragging=!1,Math.abs(this.movement.extraX)>0&&(this.scrollTo({x:this.movement.x-this.movement.extraX,y:this.movement.y-this.movement.extraY},"smooth"),this.movement.extraX-=.1,this.movement.extraY-=.1)},scrollTo:function(t,e){this.$refs.userlandContainer.scroll({left:t.x,top:t.y,behavior:e||"auto"})},setViewerPosition:function(){var t={x:this.$refs.userlandContainer.scrollLeft,y:this.$refs.userlandContainer.scrollTop},e=this.territoryByBorders(t);this.$store.commit("viewerPosition",t),this.$store.commit("setLocation",e)},randomColor:function(){var t=Math.floor(256*Math.random()),e=Math.floor(256*Math.random()),n=Math.floor(256*Math.random()),s=1;return"rgb(".concat(t,", ").concat(e,", ").concat(n,", ").concat(s,")")}}},es=ts,ns=(n("1812"),Object(S["a"])(es,p,g,!1,null,null,null)),ss=ns.exports,os=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},rs=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"blocked"}},[n("div",{staticClass:"message"},[n("p",[t._v("You have been removed.")]),n("p",[t._v("Please reflect on your behaviour.")])])])}],is={name:"Nomansland",components:{},props:[],data:function(){return{}},created:function(){},mounted:function(){var t=this.$el,e=window.innerHeight/14,n=window.innerWidth/10,s=this.tableCreate(e,n);t.appendChild(s)},methods:{tableCreate:function(t,e){for(var n=this,s=document.createElement("table"),o=0;o<t;o++)for(var r=s.insertRow(),i=function(t){var e=r.insertCell();e.innerHTML=" ",e.addEventListener("mouseover",(function(){n.repeatXI((function(){e.innerHTML=n.generate_random_string()}),100,10),setTimeout((function(){e.innerHTML=" "}),1050),setTimeout((function(){e.innerHTML=" "}),3e3)}))},a=0;a<e;a++)i(a);return s},generate_random_string:function(){var t=39,e=47,n=Math.floor(Math.random()*(e-t)+t),s=String.fromCharCode(n);return s},repeatXI:function(t,e,n){var s,o;return o=function(){t(),--n||clearInterval(s)},e=e<=0?1e3:e,n=parseInt(n,10)||0,s=setInterval(o,e),!0}}},as=is,cs=(n("32a0"),Object(S["a"])(as,os,rs,!1,null,"55f17412",null)),us=cs.exports,ls={name:"Home",components:{Mainland:ss,Nomansland:us},props:["slug"],data:function(){return{wantsToView:null,loading:!0}},computed:Object(h["e"])(["version","blocked"]),created:function(){var t=this;console.log("Version: ".concat(localStorage.version)),localStorage.version!=this.version&&(console.log("this version is outdated, clearing your storage."),localStorage.clear(),localStorage.version=this.version),this.$http.get("".concat(this.$apiURL,"/regions")).then((function(e){t.$store.commit("setTerritories",e.data),t.loading=!1})).catch((function(t){console.log(t)})),this.slug&&this.handleRouting(this.slug)},mounted:function(){var t=this;this.$router.afterEach((function(e){var n=e.fullPath.replace(t.$publicPath,"");t.handleRouting(n)}))},methods:{handleRouting:function(t){var e=t.startsWith("~")?"user":t.startsWith("#")?"territory":null,n=e?t.slice(1):t;this.wantsToView={type:e,name:n}}}},ds=ls,fs=(n("2a5d"),Object(S["a"])(ds,f,m,!1,null,"6334c020",null)),ms=fs.exports,hs={name:"App",components:{Home:ms},data:function(){return{slug:null}},created:function(){var t=this,e=window.location.pathname.replace(this.$publicPath,""),n=window.location.hash;this.slug=e||n,window.addEventListener("resize",(function(){t.$store.commit("resize",{w:window.innerWidth,h:window.innerHeight})}))}},ps=hs,gs=(n("034f"),Object(S["a"])(ps,l,d,!1,null,null,null)),vs=gs.exports,ys=n("8c4f");s["a"].use(ys["a"]);var bs=[{path:"/",name:"Home",component:ms}],ws=new ys["a"]({mode:"history",routes:bs}),_s=ws,Cs=(n("7db0"),n("4160"),n("d81d"),n("b64b"),n("07ac"),n("2ef0")),Os=n.n(Cs);s["a"].use(h["a"]);var xs=[],$s={},ks=[],Ss={},Ms=new h["a"].Store({strict:!1,state:{version:6,save:!0,uid:null,registered:!1,visited:!1,blocked:!1,users:{},messages:{},territories:[],location:{name:"general",slug:"general"},scale:5,grid:!0,windowSize:{w:window.innerWidth,h:window.innerHeight},windowPos:{x:null,y:null}},mutations:{doNotSave:function(t){return t.save=!1},setUID:function(t,e){return t.uid=e},register:function(t){return t.registered=!0},visit:function(t){return t.visited=!0},block:function(t){return t.blocked=!0},setUsers:function(t,e){return t.users=e},setUser:function(t,e){s["a"].set(t.users,e.uid,e)},setMessages:function(t,e){return t.messages=e},setMessage:function(t,e){s["a"].set(t.messages,e.uid,e)},setTerritories:function(t,e){t.territories=e},setTerritorySize:function(t,e,n){t.territories[t.territories.indexOf(e)].w=n.w,t.territories[t.territories.indexOf(e)].h=n.h,console.log(t.territories[t.territories.indexOf(e)])},setLocation:function(t,e){t.location=e},zero:function(t){return t.scale=5},zoomIn:function(t){return t.scale+=.25},zoomOut:function(t){return t.scale>1?t.scale-=.25:null},toggleGrid:function(t){return t.grid=!t.grid},resize:function(t,e){return t.windowSize=e},viewerPosition:function(t,e){return t.windowPos=e}},actions:{socket_connect:function(t){var e=t.state,n=t.commit;e.users[e.uid].deleted||(n("setUser",e.users[e.uid]),this._vm.$socket.client.emit("user",e.users[e.uid]))},socket_user:function(t,e){var n=t.state,s=t.commit,o=t.dispatch,r=JSON.parse(e);r.uid!==n.uid?s("setUser",r):!0===r.deleted&&(o("deleteUser",r),localStorage.me=JSON.stringify(n.users[n.uid]),window.location.reload(!0)),this._vm.$socket.client.emit("users",n.users),this._vm.$socket.client.emit("messages",n.messages)},socket_users:function(t,e){var n=t.dispatch,s=JSON.parse(e);xs.push(s),console.log("Syncing ".concat(xs.length," user DBs.")),n("userDBsync")},socket_message:function(t,e){var n=t.state,s=t.commit,o=JSON.parse(e);s("setMessage",o),this._vm.$socket.client.emit("messages",n.messages)},socket_messages:function(t,e){var n=t.dispatch,s=JSON.parse(e);ks.push(s),console.log("Syncing ".concat(ks.length," message DBs.")),n("messageDBsync")},socket_appearance:function(t,e){var n=t.state,s=t.commit,o=JSON.parse(e);o.uid!==n.uid&&(s("setUser",o),localStorage.users=JSON.stringify(n.users))},socket_disconnect:function(t){var e=t.state,n=t.commit;if(e.save)for(var s in localStorage.me=JSON.stringify(e.users[e.uid]),e.users){var o=Object(v["a"])({},e.users[s]);o.connected=!1,n("setUser",o)}localStorage.users=JSON.stringify(e.users),localStorage.messages=JSON.stringify(e.messages)},socket_clearDBs:function(t){var e=t.commit;e("setUsers",{}),e("setMessages",{}),localStorage.clear(),window.location.reload(!0)},updateSelf:function(t,e){var n=t.state,s=t.commit,o=n.users[n.uid],r=Object(v["a"])(Object(v["a"])({},o),e);s("setUser",r),s("register"),this._vm.$socket.client.emit("user",r),localStorage.me=JSON.stringify(r)},updateSelfAppearance:function(t,e){var n=t.state,s=t.commit,o=n.users[n.uid],r=Object(v["a"])(Object(v["a"])({},o),e);s("setUser",r),this._vm.$socket.client.emit("appearance",r)},deleteUser:function(t,e){var n=t.state,s=t.commit,o=t.dispatch,r=Object(v["a"])({},n.users[e.uid]);for(var i in r.deleted=!0,s("setUser",r),this._vm.$socket.client.emit("user",r),n.messages){var a=n.messages[i];a.authorUID==e.uid&&o("deleteMessage",a)}},deleteSelf:function(t){var e=t.state,n=t.commit,s=t.dispatch;n("doNotSave"),s("deleteUser",e.users[e.uid]),localStorage.clear(),window.location.reload(!0)},deleteMessage:function(t,e){var n=t.state,s=t.commit,o=Object(v["a"])({},n.messages[e.uid]);o.deleted=!0,s("setMessage",o),this._vm.$socket.client.emit("message",o)},censorMessage:function(t,e){var n=t.state,s=t.commit,o=Object(v["a"])({},n.messages[e.uid]);o.censored=!n.messages[e.uid].censored,s("setMessage",o),this._vm.$socket.client.emit("message",o)},userDBsync:function(t){var e=t.state,n=t.commit;for(var s in xs.sort((function(t,e){return Object.keys(e).length-Object.keys(t).length})),$s=Os.a.cloneDeep(xs[0]),xs.forEach((function(t){for(var e in t)$s[e]||($s[e]=t[e]),t[e].deleted&&($s[e].deleted=!0),t[e].name.startsWith("newUser-")||($s[e].name=t[e].name)})),$s){var o=$s[s];s!==e.uid&&n("setUser",o)}localStorage.users=JSON.stringify(e.users)},messageDBsync:function(t){var e=t.state,n=t.commit;for(var s in ks.sort((function(t,e){return Object.keys(e).length-Object.keys(t).length})),Ss=Os.a.cloneDeep(ks[0]),ks.forEach((function(t){for(var e in t)Ss[e]||(Ss[e]=t[e]),t[e].deleted&&(Ss[e].deleted=!0),t[e].censored&&(Ss[e].censored=!0)})),Ss){var o=Ss[s];n("setMessage",o)}localStorage.messages=JSON.stringify(e.messages)}},getters:{me:function(t){return t.users[t.uid]},isMe:function(t){return function(e){return e.uid===t.uid}},userByName:function(t,e){return function(n){var s=e.usersArray.find((function(t){return t.name==n}));if(s)return t.users[s.uid]}},territoryByName:function(t){return function(e){return t.territories.find((function(t){return t.name==e}))}},territoryBySlug:function(t){return function(e){return t.territories.find((function(t){return t.slug==e}))}},territoryByBorders:function(t,e){return function(n){var s={name:"general",slug:"general"},o=e.coordsFrom(n),r=t.territories.find((function(e){var n=document.querySelector("#".concat(e.slug)),s=n.scrollWidth,r=n.scrollHeight,i=s/(t.scale*t.windowSize.w),a=r/(t.scale*t.windowSize.h),c=e.borders.x-.5/t.scale,u=e.borders.y-.5/t.scale,l=i+e.borders.x-.5/t.scale,d=a+e.borders.y-.5/t.scale;if(o.x>c&&o.x<l&&o.y>u&&o.y<d)return e}));return r||s}},messagesByUser:function(t){return function(e){var n=[];for(var s in t.messages){var o=t.messages[s];o.authorUID!=e.uid||o.deleted||n.push(o)}return n}},userColors:function(t){var e={};for(var n in t.users){var s=t.users[n];e["--".concat(n)]=s.connected?s.color:"var(--disconnected)"}return e},userNames:function(t,e){return e.notDeletedUsers.map((function(t){return t.name}))},connectedUsers:function(t,e){return e.notDeletedUsers.filter((function(t){return!0===t.connected}))},connectedUsersFirst:function(t,e){return e.notDeletedUsers.sort((function(t,e){return t.connected===e.connected?0:t.connected?-1:1}))},notDeletedUsers:function(t,e){return e.usersArray.filter((function(t){return!0!==t.deleted}))},notDeletedMessages:function(t,e){return e.messagesArray.filter((function(t){return!0!==t.deleted&&t.uid}))},usersArray:function(t){return Object.values(t.users)},messagesArray:function(t){return Object.values(t.messages)},centerOf:function(t,e){return function(t){return t=e.pixelsFrom(t),{x:t.x-t.w/2,y:t.y-t.h/2,w:t.w||0,h:t.h||0}}},positionOf:function(t,e){return function(n){return n=e.pixelsFrom(n),{x:n.x-t.windowSize.w/2,y:n.y-t.windowSize.h/2}}},pixelsFrom:function(t){return function(e){return{x:e.x*t.scale*t.windowSize.w,y:e.y*t.scale*t.windowSize.h,w:e.w||0,h:e.h||0}}},coordsFrom:function(t){return function(e){return{x:e.x/(t.scale*t.windowSize.w),y:e.y/(t.scale*t.windowSize.h),w:e.w/(t.scale*t.windowSize.w)||0,h:e.h/(t.scale*t.windowSize.h)||0}}}}}),js=Ms;s["a"].config.productionTip=!1,s["a"].prototype.$http=r.a,s["a"].prototype.$apiURL="https://api.obfuscation.karls.computer",s["a"].prototype.$publicPath="/",a.a.props.anchorAttributes.default=function(){return{target:"_blank",rel:"noopener noreferrer nofollow"}},s["a"].component("vue-markdown",a.a);var Ts=Object(u["io"])("https://io.karls.computer");s["a"].use(c["a"],Ts,{store:js}),new s["a"]({router:_s,store:js,render:function(t){return t(vs)}}).$mount("#app")},57063:function(t,e,n){"use strict";n("4d50")},5949:function(t,e,n){},"5d18":function(t,e,n){},6092:function(t,e,n){"use strict";n("86e4")},"64fe":function(t,e,n){},"6b3f":function(t,e,n){},"6cb2":function(t,e,n){"use strict";n("b004")},"6f1a":function(t,e,n){},7188:function(t,e,n){"use strict";n("64fe")},"71d9":function(t,e,n){},"81cd":function(t,e,n){},"84ac":function(t,e,n){},"84fa":function(t,e,n){"use strict";n("e4f3")},"85ec":function(t,e,n){},"86e4":function(t,e,n){},"87e3":function(t,e,n){"use strict";n("a508")},"889b":function(t,e,n){"use strict";n("81cd")},"8e25":function(t,e,n){"use strict";n("2650")},"995d":function(t,e,n){"use strict";n("9d62")},"9d62":function(t,e,n){},"9e3e":function(t,e,n){"use strict";n("e998")},"9e6c":function(t,e,n){},a508:function(t,e,n){},a659:function(t,e,n){"use strict";n("0fe3")},aad5:function(t,e,n){"use strict";n("d55e")},b004:function(t,e,n){},b191:function(t,e,n){},b917:function(t,e,n){},d009:function(t,e,n){"use strict";n("2156")},d55e:function(t,e,n){},dcd8:function(t,e,n){"use strict";n("9e6c")},dda3:function(t,e,n){},e4f3:function(t,e,n){},e998:function(t,e,n){},ece6:function(t,e,n){"use strict";n("6f1a")},f091:function(t,e,n){},f7c7:function(t,e,n){},fc79:function(t,e,n){},fd40:function(t,e,n){"use strict";n("dda3")},ff8d:function(t,e,n){"use strict";n("fc79")}});
//# sourceMappingURL=app.0ff24ce7.js.map